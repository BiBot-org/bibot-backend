package com.coderecipe.receiptservice.v1.receipt.service.impl;

import com.coderecipe.receiptservice.v1.clovaocr.dto.vo.OCRtoJSONRes.Receipt;
import com.coderecipe.receiptservice.v1.clovaocr.utils.ExtractJson;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.jayway.jsonpath.JsonPath;
import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;


@SpringBootTest
@Slf4j
public class ReceiptServiceImplTest {

    @Test
    @DisplayName("Tset")
    public void test() throws JsonProcessingException {
        String test = "{\"version\":\"V2\",\"requestId\":\"7a75165d-a913-4bdc-959c-f5640e9af030\",\"timestamp\":1684811453099,\"images\":[{\"receipt\":{\"meta\":{\"estimatedLanguage\":\"ko\"},\"result\":{\"storeInfo\":{\"name\":{\"text\":\"농협\",\"formatted\":{\"value\":\"농협\"},\"boundingPolys\":[{\"vertices\":[{\"x\":141.0,\"y\":19.0},{\"x\":189.0,\"y\":19.0},{\"x\":189.0,\"y\":42.0},{\"x\":141.0,\"y\":42.0}]}],\"maskingPolys\":[]},\"bizNum\":{\"text\":\"27-82-*****\",\"formatted\":{\"value\":\"27-82-*****\"},\"boundingPolys\":[{\"vertices\":[{\"x\":79.0,\"y\":75.0},{\"x\":158.0,\"y\":75.0},{\"x\":158.0,\"y\":86.0},{\"x\":79.0,\"y\":86.0}]}],\"maskingPolys\":[]},\"addresses\":[{\"text\":\"경기 의정부시\",\"formatted\":{\"value\":\"경기 의정부시\"},\"boundingPolys\":[{\"vertices\":[{\"x\":39.0,\"y\":50.0},{\"x\":67.0,\"y\":50.0},{\"x\":67.0,\"y\":64.0},{\"x\":39.0,\"y\":64.0}]},{\"vertices\":[{\"x\":72.0,\"y\":51.0},{\"x\":125.0,\"y\":51.0},{\"x\":125.0,\"y\":64.0},{\"x\":72.0,\"y\":64.0}]}],\"maskingPolys\":[]}],\"tel\":[{\"text\":\"-\",\"formatted\":{\"value\":\"-\"},\"boundingPolys\":[{\"vertices\":[{\"x\":187.0,\"y\":66.0},{\"x\":262.0,\"y\":66.0},{\"x\":262.0,\"y\":75.0},{\"x\":187.0,\"y\":75.0}]}]}]},\"paymentInfo\":{\"date\":{\"text\":\"20151103\",\"formatted\":{\"year\":\"2015\",\"month\":\"11\",\"day\":\"03\"},\"boundingPolys\":[{\"vertices\":[{\"x\":64.0,\"y\":568.0},{\"x\":121.0,\"y\":568.0},{\"x\":121.0,\"y\":580.0},{\"x\":64.0,\"y\":580.0}]}],\"maskingPolys\":[]},\"cardInfo\":{\"company\":{\"text\":\"우리카드\",\"formatted\":{\"value\":\"우리카드\"},\"boundingPolys\":[{\"vertices\":[{\"x\":8.0,\"y\":534.0},{\"x\":66.0,\"y\":534.0},{\"x\":66.0,\"y\":547.0},{\"x\":8.0,\"y\":547.0}]}],\"maskingPolys\":[]},\"number\":{\"text\":\"4902*\",\"formatted\":{\"value\":\"4902*\"},\"boundingPolys\":[{\"vertices\":[{\"x\":65.0,\"y\":534.0},{\"x\":98.0,\"y\":534.0},{\"x\":98.0,\"y\":545.0},{\"x\":65.0,\"y\":545.0}]}],\"maskingPolys\":[]}},\"confirmNum\":{\"text\":\"75513401\",\"boundingPolys\":[{\"vertices\":[{\"x\":52.0,\"y\":557.0},{\"x\":106.0,\"y\":556.0},{\"x\":106.0,\"y\":568.0},{\"x\":52.0,\"y\":569.0}]}]}},\"subResults\":[{\"items\":[{\"name\":{\"text\":\"P굿모닝우유 900ML\",\"formatted\":{\"value\":\"P굿모닝우유 900ML\"},\"boundingPolys\":[{\"vertices\":[{\"x\":34.0,\"y\":169.0},{\"x\":112.0,\"y\":169.0},{\"x\":112.0,\"y\":182.0},{\"x\":34.0,\"y\":182.0}]},{\"vertices\":[{\"x\":115.0,\"y\":169.0},{\"x\":151.0,\"y\":169.0},{\"x\":151.0,\"y\":180.0},{\"x\":115.0,\"y\":180.0}]}],\"maskingPolys\":[]},\"code\":{\"text\":\"8801104210645\",\"boundingPolys\":[{\"vertices\":[{\"x\":7.0,\"y\":180.0},{\"x\":102.0,\"y\":180.0},{\"x\":102.0,\"y\":192.0},{\"x\":7.0,\"y\":192.0}]}]},\"count\":{\"text\":\"1\",\"formatted\":{\"value\":\"1\"},\"boundingPolys\":[{\"vertices\":[{\"x\":199.0,\"y\":182.0},{\"x\":209.0,\"y\":182.0},{\"x\":209.0,\"y\":192.0},{\"x\":199.0,\"y\":192.0}]}]},\"price\":{\"price\":{\"text\":\"1,350\",\"formatted\":{\"value\":\"1350\"},\"boundingPolys\":[{\"vertices\":[{\"x\":244.0,\"y\":179.0},{\"x\":280.0,\"y\":181.0},{\"x\":280.0,\"y\":193.0},{\"x\":244.0,\"y\":192.0}]}]},\"unitPrice\":{\"text\":\"1,350\",\"formatted\":{\"value\":\"1350\"},\"boundingPolys\":[{\"vertices\":[{\"x\":135.0,\"y\":181.0},{\"x\":172.0,\"y\":181.0},{\"x\":172.0,\"y\":192.0},{\"x\":135.0,\"y\":192.0}]}]}}},{\"name\":{\"text\":\"P양파\",\"formatted\":{\"value\":\"P양파\"},\"boundingPolys\":[{\"vertices\":[{\"x\":34.0,\"y\":192.0},{\"x\":74.0,\"y\":192.0},{\"x\":74.0,\"y\":205.0},{\"x\":34.0,\"y\":205.0}]}],\"maskingPolys\":[]},\"code\":{\"text\":\"231973\",\"boundingPolys\":[{\"vertices\":[{\"x\":7.0,\"y\":204.0},{\"x\":58.0,\"y\":204.0},{\"x\":58.0,\"y\":217.0},{\"x\":7.0,\"y\":217.0}]}]},\"count\":{\"text\":\"1\",\"formatted\":{\"value\":\"1\"},\"boundingPolys\":[{\"vertices\":[{\"x\":199.0,\"y\":205.0},{\"x\":209.0,\"y\":205.0},{\"x\":209.0,\"y\":215.0},{\"x\":199.0,\"y\":215.0}]}]},\"price\":{\"price\":{\"text\":\"3,300\",\"formatted\":{\"value\":\"3300\"},\"boundingPolys\":[{\"vertices\":[{\"x\":243.0,\"y\":204.0},{\"x\":280.0,\"y\":204.0},{\"x\":280.0,\"y\":216.0},{\"x\":243.0,\"y\":216.0}]}]},\"unitPrice\":{\"text\":\"3,300\",\"formatted\":{\"value\":\"3300\"},\"boundingPolys\":[{\"vertices\":[{\"x\":134.0,\"y\":204.0},{\"x\":172.0,\"y\":204.0},{\"x\":172.0,\"y\":216.0},{\"x\":134.0,\"y\":215.0}]}]}}},{\"name\":{\"text\":\"P우\",\"formatted\":{\"value\":\"P우\"},\"boundingPolys\":[{\"vertices\":[{\"x\":34.0,\"y\":216.0},{\"x\":61.0,\"y\":216.0},{\"x\":61.0,\"y\":229.0},{\"x\":34.0,\"y\":229.0}]}],\"maskingPolys\":[]},\"code\":{\"text\":\"231913\",\"boundingPolys\":[{\"vertices\":[{\"x\":7.0,\"y\":228.0},{\"x\":56.0,\"y\":228.0},{\"x\":56.0,\"y\":240.0},{\"x\":7.0,\"y\":240.0}]}]},\"count\":{\"text\":\"1\",\"formatted\":{\"value\":\"1\"},\"boundingPolys\":[{\"vertices\":[{\"x\":199.0,\"y\":229.0},{\"x\":209.0,\"y\":229.0},{\"x\":209.0,\"y\":239.0},{\"x\":199.0,\"y\":239.0}]}]},\"price\":{\"price\":{\"text\":\"500\",\"formatted\":{\"value\":\"500\"},\"boundingPolys\":[{\"vertices\":[{\"x\":255.0,\"y\":228.0},{\"x\":280.0,\"y\":228.0},{\"x\":280.0,\"y\":240.0},{\"x\":255.0,\"y\":240.0}]}]},\"unitPrice\":{\"text\":\"500\",\"formatted\":{\"value\":\"500\"},\"boundingPolys\":[{\"vertices\":[{\"x\":148.0,\"y\":228.0},{\"x\":172.0,\"y\":228.0},{\"x\":172.0,\"y\":240.0},{\"x\":148.0,\"y\":240.0}]}]}}},{\"name\":{\"text\":\"P깻잎\",\"formatted\":{\"value\":\"P깻잎\"},\"boundingPolys\":[{\"vertices\":[{\"x\":33.0,\"y\":239.0},{\"x\":73.0,\"y\":239.0},{\"x\":73.0,\"y\":253.0},{\"x\":33.0,\"y\":253.0}]}],\"maskingPolys\":[]},\"code\":{\"text\":\"231308\",\"boundingPolys\":[{\"vertices\":[{\"x\":8.0,\"y\":251.0},{\"x\":57.0,\"y\":251.0},{\"x\":57.0,\"y\":264.0},{\"x\":8.0,\"y\":264.0}]}]},\"count\":{\"text\":\"1\",\"formatted\":{\"value\":\"1\"},\"boundingPolys\":[{\"vertices\":[{\"x\":199.0,\"y\":252.0},{\"x\":209.0,\"y\":252.0},{\"x\":209.0,\"y\":263.0},{\"x\":199.0,\"y\":263.0}]}]},\"price\":{\"price\":{\"text\":\"750\",\"formatted\":{\"value\":\"750\"},\"boundingPolys\":[{\"vertices\":[{\"x\":256.0,\"y\":251.0},{\"x\":280.0,\"y\":251.0},{\"x\":280.0,\"y\":264.0},{\"x\":256.0,\"y\":264.0}]}]},\"unitPrice\":{\"text\":\"750\",\"formatted\":{\"value\":\"750\"},\"boundingPolys\":[{\"vertices\":[{\"x\":148.0,\"y\":251.0},{\"x\":172.0,\"y\":251.0},{\"x\":172.0,\"y\":264.0},{\"x\":148.0,\"y\":264.0}]}]}}},{\"name\":{\"text\":\"P하선정 바로먹기좋은장아찌 150g\",\"formatted\":{\"value\":\"P하선정 바로먹기좋은장아찌 150g\"},\"boundingPolys\":[{\"vertices\":[{\"x\":33.0,\"y\":262.0},{\"x\":86.0,\"y\":262.0},{\"x\":86.0,\"y\":277.0},{\"x\":33.0,\"y\":277.0}]},{\"vertices\":[{\"x\":90.0,\"y\":263.0},{\"x\":208.0,\"y\":263.0},{\"x\":208.0,\"y\":277.0},{\"x\":90.0,\"y\":277.0}]},{\"vertices\":[{\"x\":213.0,\"y\":262.0},{\"x\":242.0,\"y\":264.0},{\"x\":241.0,\"y\":276.0},{\"x\":212.0,\"y\":274.0}]}],\"maskingPolys\":[]},\"code\":{\"text\":\"8801007265889\",\"boundingPolys\":[{\"vertices\":[{\"x\":13.0,\"y\":274.0},{\"x\":102.0,\"y\":274.0},{\"x\":102.0,\"y\":287.0},{\"x\":13.0,\"y\":287.0}]}]},\"count\":{\"text\":\"1\",\"formatted\":{\"value\":\"1\"},\"boundingPolys\":[{\"vertices\":[{\"x\":200.0,\"y\":277.0},{\"x\":208.0,\"y\":277.0},{\"x\":208.0,\"y\":285.0},{\"x\":200.0,\"y\":285.0}]}]},\"price\":{\"price\":{\"text\":\"1.380\",\"formatted\":{\"value\":\"1380\"},\"boundingPolys\":[{\"vertices\":[{\"x\":244.0,\"y\":274.0},{\"x\":279.0,\"y\":274.0},{\"x\":279.0,\"y\":287.0},{\"x\":244.0,\"y\":287.0}]}]},\"unitPrice\":{\"text\":\"1.380\",\"formatted\":{\"value\":\"1380\"},\"boundingPolys\":[{\"vertices\":[{\"x\":135.0,\"y\":275.0},{\"x\":171.0,\"y\":275.0},{\"x\":171.0,\"y\":287.0},{\"x\":135.0,\"y\":287.0}]}]}}},{\"name\":{\"text\":\"P브로커리\",\"formatted\":{\"value\":\"P브로커리\"},\"boundingPolys\":[{\"vertices\":[{\"x\":34.0,\"y\":287.0},{\"x\":98.0,\"y\":287.0},{\"x\":98.0,\"y\":300.0},{\"x\":34.0,\"y\":300.0}]}],\"maskingPolys\":[]},\"code\":{\"text\":\"232285\",\"boundingPolys\":[{\"vertices\":[{\"x\":7.0,\"y\":299.0},{\"x\":56.0,\"y\":299.0},{\"x\":56.0,\"y\":310.0},{\"x\":7.0,\"y\":310.0}]}]},\"count\":{\"text\":\"1\",\"formatted\":{\"value\":\"1\"},\"boundingPolys\":[{\"vertices\":[{\"x\":200.0,\"y\":301.0},{\"x\":208.0,\"y\":301.0},{\"x\":208.0,\"y\":309.0},{\"x\":200.0,\"y\":309.0}]}]},\"price\":{\"price\":{\"text\":\"1,280\",\"formatted\":{\"value\":\"1280\"},\"boundingPolys\":[{\"vertices\":[{\"x\":243.0,\"y\":299.0},{\"x\":279.0,\"y\":299.0},{\"x\":279.0,\"y\":310.0},{\"x\":243.0,\"y\":310.0}]}]},\"unitPrice\":{\"text\":\"1,280\",\"formatted\":{\"value\":\"1280\"},\"boundingPolys\":[{\"vertices\":[{\"x\":135.0,\"y\":299.0},{\"x\":171.0,\"y\":299.0},{\"x\":171.0,\"y\":310.0},{\"x\":135.0,\"y\":310.0}]}]}}}]}],\"totalPrice\":{\"price\":{\"text\":\"8.560\",\"formatted\":{\"value\":\"8560\"},\"boundingPolys\":[{\"vertices\":[{\"x\":236.0,\"y\":345.0},{\"x\":273.0,\"y\":345.0},{\"x\":273.0,\"y\":358.0},{\"x\":236.0,\"y\":358.0}]}]}}}},\"uid\":\"0f1678874f494e02a5d3b20f27620352\",\"name\":\"demo\",\"inferResult\":\"SUCCESS\",\"message\":\"SUCCESS\",\"validationResult\":{\"result\":\"NO_REQUESTED\"}}]}";
        String test2 = "{\"version\":\"V2\",\"requestId\":\"e3fecd76-c945-4b1f-b4a0-c735f7d8dffb\",\"timestamp\":1684890775777,\"images\":[{\"receipt\":{\"meta\":{\"estimatedLanguage\":\"ko\"},\"result\":{\"storeInfo\":{\"name\":{\"text\":\"(주)아성다이소\",\"formatted\":{\"value\":\"(주)아성다이소\"},\"boundingPolys\":[{\"vertices\":[{\"x\":280.0,\"y\":161.0},{\"x\":601.0,\"y\":151.0},{\"x\":602.0,\"y\":186.0},{\"x\":281.0,\"y\":196.0}]}],\"maskingPolys\":[]},\"subName\":{\"text\":\"의정부민락점\",\"formatted\":{\"value\":\"의정부민락점\"},\"boundingPolys\":[{\"vertices\":[{\"x\":280.0,\"y\":161.0},{\"x\":601.0,\"y\":151.0},{\"x\":602.0,\"y\":186.0},{\"x\":281.0,\"y\":196.0}]}],\"maskingPolys\":[]},\"bizNum\":{\"text\":\"213-81-52063\",\"formatted\":{\"value\":\"213-81-52063\"},\"boundingPolys\":[{\"vertices\":[{\"x\":516.0,\"y\":263.0},{\"x\":661.0,\"y\":259.0},{\"x\":662.0,\"y\":283.0},{\"x\":516.0,\"y\":287.0}]}],\"maskingPolys\":[]},\"addresses\":[{\"text\":\"서울 강남구 남부순환로 2748 (도곡동)\",\"formatted\":{\"value\":\"서울 강남구 남부순환로 2748(도곡동)\"},\"boundingPolys\":[{\"vertices\":[{\"x\":343.0,\"y\":230.0},{\"x\":395.0,\"y\":230.0},{\"x\":395.0,\"y\":262.0},{\"x\":343.0,\"y\":262.0}]},{\"vertices\":[{\"x\":401.0,\"y\":227.0},{\"x\":475.0,\"y\":227.0},{\"x\":475.0,\"y\":260.0},{\"x\":401.0,\"y\":260.0}]},{\"vertices\":[{\"x\":480.0,\"y\":223.0},{\"x\":603.0,\"y\":218.0},{\"x\":604.0,\"y\":255.0},{\"x\":482.0,\"y\":260.0}]},{\"vertices\":[{\"x\":607.0,\"y\":226.0},{\"x\":662.0,\"y\":223.0},{\"x\":663.0,\"y\":247.0},{\"x\":608.0,\"y\":249.0}]},{\"vertices\":[{\"x\":667.0,\"y\":219.0},{\"x\":766.0,\"y\":219.0},{\"x\":766.0,\"y\":251.0},{\"x\":667.0,\"y\":251.0}]}],\"maskingPolys\":[]},{\"text\":\"경기도 의정부시 용민로182번길 17 (민락동)\",\"formatted\":{\"value\":\"경기도 의정부시 용민로182번길 17(민락동)\"},\"boundingPolys\":[{\"vertices\":[{\"x\":346.0,\"y\":299.0},{\"x\":419.0,\"y\":299.0},{\"x\":419.0,\"y\":331.0},{\"x\":346.0,\"y\":331.0}]},{\"vertices\":[{\"x\":425.0,\"y\":294.0},{\"x\":522.0,\"y\":294.0},{\"x\":522.0,\"y\":327.0},{\"x\":425.0,\"y\":327.0}]},{\"vertices\":[{\"x\":529.0,\"y\":294.0},{\"x\":684.0,\"y\":288.0},{\"x\":685.0,\"y\":320.0},{\"x\":530.0,\"y\":325.0}]},{\"vertices\":[{\"x\":690.0,\"y\":289.0},{\"x\":724.0,\"y\":289.0},{\"x\":724.0,\"y\":315.0},{\"x\":690.0,\"y\":315.0}]},{\"vertices\":[{\"x\":728.0,\"y\":288.0},{\"x\":826.0,\"y\":288.0},{\"x\":826.0,\"y\":318.0},{\"x\":728.0,\"y\":318.0}]}],\"maskingPolys\":[]}],\"tel\":[{\"text\":\"031-852-6016\",\"formatted\":{\"value\":\"0318526016\"},\"boundingPolys\":[{\"vertices\":[{\"x\":339.0,\"y\":198.0},{\"x\":486.0,\"y\":195.0},{\"x\":486.0,\"y\":221.0},{\"x\":340.0,\"y\":224.0}]}]}]},\"paymentInfo\":{\"date\":{\"text\":\"2022.01.14\",\"formatted\":{\"year\":\"2022\",\"month\":\"01\",\"day\":\"14\"},\"boundingPolys\":[{\"vertices\":[{\"x\":625.0,\"y\":632.0},{\"x\":748.0,\"y\":628.0},{\"x\":748.0,\"y\":652.0},{\"x\":626.0,\"y\":656.0}]}],\"maskingPolys\":[]},\"time\":{\"text\":\"16: 06: 32\",\"formatted\":{\"hour\":\"16\",\"minute\":\"06\",\"second\":\"32\"},\"boundingPolys\":[{\"vertices\":[{\"x\":754.0,\"y\":631.0},{\"x\":789.0,\"y\":631.0},{\"x\":789.0,\"y\":650.0},{\"x\":754.0,\"y\":650.0}]},{\"vertices\":[{\"x\":788.0,\"y\":629.0},{\"x\":826.0,\"y\":629.0},{\"x\":826.0,\"y\":650.0},{\"x\":788.0,\"y\":650.0}]},{\"vertices\":[{\"x\":821.0,\"y\":628.0},{\"x\":851.0,\"y\":628.0},{\"x\":851.0,\"y\":650.0},{\"x\":821.0,\"y\":650.0}]}]},\"cardInfo\":{\"company\":{\"text\":\"국민카드\",\"formatted\":{\"value\":\"국민카드\"},\"boundingPolys\":[{\"vertices\":[{\"x\":314.0,\"y\":1275.0},{\"x\":407.0,\"y\":1275.0},{\"x\":407.0,\"y\":1304.0},{\"x\":314.0,\"y\":1304.0}]}],\"maskingPolys\":[]},\"number\":{\"text\":\"944542******\",\"formatted\":{\"value\":\"944542******\"},\"boundingPolys\":[{\"vertices\":[{\"x\":682.0,\"y\":1278.0},{\"x\":818.0,\"y\":1278.0},{\"x\":818.0,\"y\":1298.0},{\"x\":682.0,\"y\":1298.0}]}],\"maskingPolys\":[]}},\"confirmNum\":{\"text\":\"30040608\",\"boundingPolys\":[{\"vertices\":[{\"x\":413.0,\"y\":1305.0},{\"x\":541.0,\"y\":1309.0},{\"x\":541.0,\"y\":1335.0},{\"x\":412.0,\"y\":1331.0}]}]}},\"subResults\":[{\"items\":[{\"name\":{\"text\":\"아이깨끗해 주방용핸드워시(\",\"formatted\":{\"value\":\"아이깨끗해 주방용핸드워시(\"},\"boundingPolys\":[{\"vertices\":[{\"x\":300.0,\"y\":698.0},{\"x\":419.0,\"y\":698.0},{\"x\":419.0,\"y\":730.0},{\"x\":300.0,\"y\":730.0}]},{\"vertices\":[{\"x\":425.0,\"y\":697.0},{\"x\":602.0,\"y\":695.0},{\"x\":602.0,\"y\":728.0},{\"x\":425.0,\"y\":730.0}]}],\"maskingPolys\":[]},\"count\":{\"text\":\"1\",\"formatted\":{\"value\":\"1\"},\"boundingPolys\":[{\"vertices\":[{\"x\":730.0,\"y\":698.0},{\"x\":746.0,\"y\":698.0},{\"x\":746.0,\"y\":714.0},{\"x\":730.0,\"y\":714.0}]}]},\"price\":{\"price\":{\"text\":\"3,000\",\"formatted\":{\"value\":\"3000\"},\"boundingPolys\":[{\"vertices\":[{\"x\":788.0,\"y\":695.0},{\"x\":851.0,\"y\":695.0},{\"x\":851.0,\"y\":717.0},{\"x\":788.0,\"y\":717.0}]}]},\"unitPrice\":{\"text\":\"3,000\",\"formatted\":{\"value\":\"3000\"},\"boundingPolys\":[{\"vertices\":[{\"x\":638.0,\"y\":698.0},{\"x\":702.0,\"y\":698.0},{\"x\":702.0,\"y\":720.0},{\"x\":638.0,\"y\":720.0}]}]}}},{\"name\":{\"text\":\"패턴각인유리컵(약 330\",\"formatted\":{\"value\":\"패턴각인유리컵(약 330\"},\"boundingPolys\":[{\"vertices\":[{\"x\":303.0,\"y\":764.0},{\"x\":501.0,\"y\":761.0},{\"x\":501.0,\"y\":794.0},{\"x\":303.0,\"y\":797.0}]},{\"vertices\":[{\"x\":506.0,\"y\":765.0},{\"x\":545.0,\"y\":765.0},{\"x\":545.0,\"y\":788.0},{\"x\":506.0,\"y\":788.0}]}],\"maskingPolys\":[]},\"count\":{\"text\":\"1\",\"formatted\":{\"value\":\"1\"},\"boundingPolys\":[{\"vertices\":[{\"x\":731.0,\"y\":763.0},{\"x\":748.0,\"y\":763.0},{\"x\":748.0,\"y\":780.0},{\"x\":731.0,\"y\":780.0}]}]},\"price\":{\"price\":{\"text\":\"2,000\",\"formatted\":{\"value\":\"2000\"},\"boundingPolys\":[{\"vertices\":[{\"x\":789.0,\"y\":760.0},{\"x\":851.0,\"y\":760.0},{\"x\":851.0,\"y\":783.0},{\"x\":789.0,\"y\":783.0}]}]},\"unitPrice\":{\"text\":\"2,000\",\"formatted\":{\"value\":\"2000\"},\"boundingPolys\":[{\"vertices\":[{\"x\":640.0,\"y\":762.0},{\"x\":704.0,\"y\":762.0},{\"x\":704.0,\"y\":786.0},{\"x\":640.0,\"y\":786.0}]}]}}},{\"name\":{\"text\":\"신규소비자봉투(소)\",\"formatted\":{\"value\":\"신규소비자봉투(소)\"},\"boundingPolys\":[{\"vertices\":[{\"x\":304.0,\"y\":828.0},{\"x\":510.0,\"y\":826.0},{\"x\":511.0,\"y\":855.0},{\"x\":305.0,\"y\":858.0}]}],\"maskingPolys\":[]},\"count\":{\"text\":\"1\",\"formatted\":{\"value\":\"1\"},\"boundingPolys\":[{\"vertices\":[{\"x\":731.0,\"y\":827.0},{\"x\":748.0,\"y\":827.0},{\"x\":748.0,\"y\":845.0},{\"x\":731.0,\"y\":845.0}]}]},\"price\":{\"price\":{\"text\":\"50\",\"formatted\":{\"value\":\"50\"},\"boundingPolys\":[{\"vertices\":[{\"x\":818.0,\"y\":823.0},{\"x\":855.0,\"y\":823.0},{\"x\":855.0,\"y\":848.0},{\"x\":818.0,\"y\":848.0}]}]},\"unitPrice\":{\"text\":\"50\",\"formatted\":{\"value\":\"50\"},\"boundingPolys\":[{\"vertices\":[{\"x\":673.0,\"y\":827.0},{\"x\":704.0,\"y\":827.0},{\"x\":704.0,\"y\":848.0},{\"x\":673.0,\"y\":848.0}]}]}}},{\"name\":{\"text\":\"매직스펀지직사각 (6P/SE\",\"formatted\":{\"value\":\"매직스펀지직사각(6P/SE\"},\"boundingPolys\":[{\"vertices\":[{\"x\":307.0,\"y\":891.0},{\"x\":492.0,\"y\":888.0},{\"x\":492.0,\"y\":921.0},{\"x\":308.0,\"y\":924.0}]},{\"vertices\":[{\"x\":487.0,\"y\":892.0},{\"x\":560.0,\"y\":890.0},{\"x\":561.0,\"y\":914.0},{\"x\":488.0,\"y\":916.0}]}],\"maskingPolys\":[]},\"count\":{\"text\":\"1\",\"formatted\":{\"value\":\"1\"},\"boundingPolys\":[{\"vertices\":[{\"x\":731.0,\"y\":891.0},{\"x\":749.0,\"y\":891.0},{\"x\":749.0,\"y\":908.0},{\"x\":731.0,\"y\":908.0}]}]},\"price\":{\"price\":{\"text\":\"2,000\",\"formatted\":{\"value\":\"2000\"},\"boundingPolys\":[{\"vertices\":[{\"x\":789.0,\"y\":888.0},{\"x\":851.0,\"y\":888.0},{\"x\":851.0,\"y\":911.0},{\"x\":789.0,\"y\":911.0}]}]},\"unitPrice\":{\"text\":\"2,000\",\"formatted\":{\"value\":\"2000\"},\"boundingPolys\":[{\"vertices\":[{\"x\":641.0,\"y\":890.0},{\"x\":705.0,\"y\":890.0},{\"x\":705.0,\"y\":914.0},{\"x\":641.0,\"y\":914.0}]}]}}},{\"name\":{\"text\":\"무궁화참숯때비누 (100 g\",\"formatted\":{\"value\":\"무궁화참숯때비누(100 g\"},\"boundingPolys\":[{\"vertices\":[{\"x\":307.0,\"y\":956.0},{\"x\":492.0,\"y\":953.0},{\"x\":492.0,\"y\":985.0},{\"x\":308.0,\"y\":988.0}]},{\"vertices\":[{\"x\":487.0,\"y\":957.0},{\"x\":538.0,\"y\":957.0},{\"x\":538.0,\"y\":979.0},{\"x\":487.0,\"y\":979.0}]},{\"vertices\":[{\"x\":542.0,\"y\":958.0},{\"x\":562.0,\"y\":958.0},{\"x\":562.0,\"y\":982.0},{\"x\":542.0,\"y\":982.0}]}],\"maskingPolys\":[]},\"count\":{\"text\":\"1\",\"formatted\":{\"value\":\"1\"},\"boundingPolys\":[{\"vertices\":[{\"x\":733.0,\"y\":955.0},{\"x\":749.0,\"y\":955.0},{\"x\":749.0,\"y\":973.0},{\"x\":733.0,\"y\":973.0}]}]},\"price\":{\"price\":{\"text\":\"1,000\",\"formatted\":{\"value\":\"1000\"},\"boundingPolys\":[{\"vertices\":[{\"x\":791.0,\"y\":954.0},{\"x\":853.0,\"y\":954.0},{\"x\":853.0,\"y\":976.0},{\"x\":791.0,\"y\":976.0}]}]},\"unitPrice\":{\"text\":\"1,000\",\"formatted\":{\"value\":\"1000\"},\"boundingPolys\":[{\"vertices\":[{\"x\":644.0,\"y\":955.0},{\"x\":707.0,\"y\":955.0},{\"x\":707.0,\"y\":978.0},{\"x\":644.0,\"y\":978.0}]}]}}},{\"name\":{\"text\":\"고급스탠다기능가위(양손)\",\"formatted\":{\"value\":\"고급스탠다기능가위(양손)\"},\"boundingPolys\":[{\"vertices\":[{\"x\":309.0,\"y\":1019.0},{\"x\":580.0,\"y\":1015.0},{\"x\":581.0,\"y\":1046.0},{\"x\":309.0,\"y\":1050.0}]}],\"maskingPolys\":[]},\"count\":{\"text\":\"1\",\"formatted\":{\"value\":\"1\"},\"boundingPolys\":[{\"vertices\":[{\"x\":734.0,\"y\":1019.0},{\"x\":751.0,\"y\":1019.0},{\"x\":751.0,\"y\":1036.0},{\"x\":734.0,\"y\":1036.0}]}]},\"price\":{\"price\":{\"text\":\"2,000\",\"formatted\":{\"value\":\"2000\"},\"boundingPolys\":[{\"vertices\":[{\"x\":791.0,\"y\":1018.0},{\"x\":853.0,\"y\":1018.0},{\"x\":853.0,\"y\":1040.0},{\"x\":791.0,\"y\":1040.0}]}]},\"unitPrice\":{\"text\":\"2,000\",\"formatted\":{\"value\":\"2000\"},\"boundingPolys\":[{\"vertices\":[{\"x\":644.0,\"y\":1018.0},{\"x\":707.0,\"y\":1018.0},{\"x\":707.0,\"y\":1040.0},{\"x\":644.0,\"y\":1040.0}]}]}}}]}],\"totalPrice\":{\"price\":{\"text\":\"10,050\",\"formatted\":{\"value\":\"10050\"},\"boundingPolys\":[{\"vertices\":[{\"x\":783.0,\"y\":1144.0},{\"x\":856.0,\"y\":1144.0},{\"x\":856.0,\"y\":1168.0},{\"x\":783.0,\"y\":1168.0}]}]}}}},\"uid\":\"1d67f184ec1e4e0e8d2fa8a92bc6c1e5\",\"name\":\"demo\",\"inferResult\":\"SUCCESS\",\"message\":\"SUCCESS\",\"validationResult\":{\"result\":\"NO_REQUESTED\"}}]}";
        String err = "\"{\"version\":\"V2\",\"requestId\":\"2b1de4d4-aa80-4ee2-a624-f4e2916de925\",\"timestamp\":1684914014684,\"images\":[{\"receipt\":{\"meta\":{\"estimatedLanguage\":\"ja\"},\"result\":{\"storeInfo\":{\"name\":{\"text\":\"utterstock.com\",\"formatted\":{\"value\":\"utterstock.com\"},\"boundingPolys\":[{\"vertices\":[{\"x\":107.0,\"y\":266.0},{\"x\":193.0,\"y\":266.0},{\"x\":193.0,\"y\":276.0},{\"x\":107.0,\"y\":276.0}]}],\"maskingPolys\":[]},\"tel\":[{\"text\":\"9925\",\"formatted\":{\"value\\\":\\\"9925\\\"},\\\"boundingPolys\\\":[{\\\"vertices\\\":[{\\\"x\\\":200.0,\\\"y\\\":266.0},{\\\"x\\\":263.0,\\\"y\\\":266.0},{\\\"x\\\":263.0,\\\"y\\\":276.0},{\\\"x\\\":200.0,\\\"y\\\":276.0}]}]}]},\\\"subResults\\\":[]}},\\\"uid\\\":\\\"c9ca7575cb9541d197feb8dc03f78acc\\\",\\\"name\\\":\\\"demo\\\",\\\"inferResult\\\":\\\"SUCCESS\\\",\\\"message\\\":\\\"SUCCESS\\\",\\\"validationResult\\\":{\\\"result\\\":\\\"NO_REQUESTED\\\"}}]}\"";
        String aaa = "{\"version\":\"V2\",\"requestId\":\"3726cd96-196a-4d58-aaba-d5ba1534bb00\",\"timestamp\":1684998497553,\"images\":[{\"receipt\":{\"meta\":{\"estimatedLanguage\":\"ja\"},\"result\":{\"storeInfo\":{\"name\":{\"text\":\"utterstock.com\",\"formatted\":{\"value\":\"utterstock.com\"},\"boundingPolys\":[{\"vertices\":[{\"x\":107.0,\"y\":266.0},{\"x\":193.0,\"y\":266.0},{\"x\":193.0,\"y\":276.0},{\"x\":107.0,\"y\":276.0}]}],\"maskingPolys\":[]},\"tel\":[{\"text\":\"9925\",\"formatted\":{\"value\":\"9925\"},\"boundingPolys\":[{\"vertices\":[{\"x\":200.0,\"y\":266.0},{\"x\":263.0,\"y\":266.0},{\"x\":263.0,\"y\":276.0},{\"x\":200.0,\"y\":276.0}]}]}]},\"subResults\":[]}},\"uid\":\"5dc408fb58764a97baaedde8a22d7a3b\",\"name\":\"demo\",\"inferResult\":\"SUCCESS\",\"message\":\"SUCCESS\",\"validationResult\":{\"result\":\"NO_REQUESTED\"}}]}";
        ObjectMapper mapper = new ObjectMapper();

        if(JsonPath.read(aaa, "$.images[0].receipt") != null) {
            Receipt receipt =  mapper.convertValue(JsonPath.read(aaa, "$.images[0].receipt"), Receipt.class);
//            Receipt receipt = image.getReceipt();
//        if(JsonPath.read(aaa, "$.images[0]") != null) {
//            Image image =  mapper.convertValue(JsonPath.read(aaa, "$.images[0]"), Image.class);
//                Receipt receipt = image.getReceipt();
        ExtractJson ex = ExtractJson.of(receipt);
//            System.out.println(image);
            System.out.println(receipt);
            System.out.println("storeName : " + ex.getStoreName());
            System.out.println("storeSubName : " + ex.getStoreSubName());
            System.out.println("bizNum : " + ex.getBizNum());
            System.out.println("addresses : " + ex.getAddresses());
            System.out.println("tel : " + ex.getTel());
            System.out.println("date : " + ex.getDate());
            System.out.println("time : " + ex.getTime());
            System.out.println("confirmNum : " + ex.getConfirmNum());
            System.out.println("cardCompany : " + ex.getCardCompany());
            System.out.println("cardNum : " + ex.getCardNum());
            System.out.println("items : " + ex.getItems());
            System.out.println("totalPrice : " + ex.getTotalPrice());
        }
    }
}
